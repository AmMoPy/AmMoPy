const modal=document.getElementById("contact-modal");const contactLink=document.getElementById("contact-link");const closeBtn=document.querySelector(".close");contactLink.addEventListener("click",(async e=>{e.preventDefault();modal.style.display="block";try{const response=await fetch("https://werdos.vercel.app/api/sendEmail",{method:"GET",credentials:"include"});if(!response.ok){throw new Error("Failed to fetch CSRF token")}}catch(error){console.error("CSRF Token Error:",error)}}));closeBtn.addEventListener("click",(()=>{modal.style.display="none"}));window.addEventListener("click",(e=>{if(e.target===modal){modal.style.display="none"}}));const sanitizeInput=input=>input.replace(/</g,"&lt;").replace(/>/g,"&gt;");document.getElementById("contact-form").addEventListener("submit",(async e=>{e.preventDefault();const email=sanitizeInput(document.getElementById("email").value);const subject=sanitizeInput(document.getElementById("subject").value);const message=sanitizeInput(document.getElementById("message").value);try{const response=await fetch("https://werdos.vercel.app/api/sendEmail",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:email,subject:subject,message:message})});if(response.ok){alert("Message sent successfully!");modal.style.display="none"}else{throw new Error("Failed to send message")}}catch(error){alert("Failed to send message. Please try again.");console.error("Error:",error)}}));